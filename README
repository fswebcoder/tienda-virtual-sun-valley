# ğŸ›ï¸ Tienda Virtual - Backend (NestJS + Prisma + PostgreSQL)

Este es el backend de la tienda virtual desarrollado con **NestJS**, utilizando **Prisma** como ORM y **PostgreSQL** como base de datos.

## ğŸš€ Requisitos Previos

Antes de comenzar, asegÃºrate de tener instalados los siguientes requisitos:

- **Node.js** (VersiÃ³n 18 o superior) â†’ [Descargar Node.js](https://nodejs.org/)
- **PostgreSQL** (VersiÃ³n 14 o superior) â†’ [Descargar PostgreSQL](https://www.postgresql.org/download/)
- **Git** â†’ [Descargar Git](https://git-scm.com/)

## ğŸ“¥ InstalaciÃ³n

### 1ï¸âƒ£ Clonar el Repositorio

```sh
git clone https://github.com/tu-usuario/tienda-virtual-backend.git
cd tienda-virtual-backend
```

### 2ï¸âƒ£ Instalar Dependencias

```sh
npm install
```

## ğŸ› ï¸ ConfiguraciÃ³n del Entorno

### 3ï¸âƒ£ Configurar Variables de Entorno

Crea un archivo `.env` en la raÃ­z del proyecto y copia el siguiente contenido:

```env
DATABASE_URL="postgresql://usuario:password@localhost:5432/tiendavirtual?schema=public"
JWT_SECRET="clave_super_secreta_para_jwt"
```

ğŸ“Œ **AsegÃºrate de reemplazar `usuario` y `password` con tus credenciales de PostgreSQL.**

### 4ï¸âƒ£ Crear la Base de Datos con Prisma

La base de datos se crearÃ¡ automÃ¡ticamente al ejecutar la migraciÃ³n de Prisma en el siguiente paso. No es necesario crearla manualmente.

```sql
CREATE DATABASE tiendavirtual;
```

## ğŸ”§ ConfiguraciÃ³n de Prisma

### 5ï¸âƒ£ Generar las Migraciones

Ejecuta el siguiente comando para sincronizar la base de datos:

```sh
npx prisma migrate dev --name init
```

### 6ï¸âƒ£ Generar el Cliente de Prisma

```sh
npx prisma generate
```

## ğŸš€ EjecuciÃ³n del Servidor

### 7ï¸âƒ£ Iniciar la API en Modo Desarrollo

```sh
npm run start:dev
```

ğŸ“Œ La API estarÃ¡ disponible en **`http://localhost:3000`**.

### 8ï¸âƒ£ Acceder a la DocumentaciÃ³n Swagger

Una vez el servidor estÃ© corriendo, accede a **Swagger** para probar los endpoints:

```sh
http://localhost:3000/api
```

## ğŸ“¡ Endpoints Principales

### ğŸ”¹ **AutenticaciÃ³n**

- `POST /auth/login` â†’ Iniciar sesiÃ³n y obtener un token JWT

### ğŸ”¹ **Usuarios** (Solo para Admins)

- `GET /users` â†’ Listar usuarios
- `POST /users` â†’ Crear usuario
- `DELETE /users/:id` â†’ Eliminar usuario

### ğŸ”¹ **Productos** (Todos los usuarios pueden ver)

- `GET /products` â†’ Listar productos con paginaciÃ³n
- `POST /products` â†’ Crear un producto (Solo admin)
- `PATCH /products/:id` â†’ Editar un producto (Solo admin)
- `DELETE /products/:id` â†’ Eliminar un producto (Solo admin, si no estÃ¡ en una orden)

## âœ… Â¡Todo Listo!

Ahora puedes consumir la API y probarla con Postman o Swagger.

---

ğŸ“Œ **Autor:** Fabio SÃ¡nchez  
ğŸ“Œ **Repositorio:** [GitHub - tienda-virtual-backend](https://github.com/tu-usuario/tienda-virtual-backend)  
ğŸš€ **Â¡Feliz Coding!** ğŸ‰
